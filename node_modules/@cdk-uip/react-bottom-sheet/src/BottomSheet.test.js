import React from "react";
import TestUtils from "react-dom/test-utils";
import { BottomSheet, BottomSheetTitle } from ".";
import { NavList, NavListItem } from "@cdk-uip/react-list";
import { FAB } from "@cdk-uip/react-fab";
import renderer from "react-test-renderer";

class Container extends React.Component {
  render() {
    return (
      <BottomSheet open={this.props.show} onClose={this.props.onClose}>
        {this.props.children}
      </BottomSheet>
    );
  }
}

it("Renders BottomSheet", () => {
  expect(
    renderer.create(
      <BottomSheet open onClose={() => ({})}>
        Bottom sheet content
      </BottomSheet>
    )
  ).toMatchSnapshot();
});

it("Executes onClose properly", () => {
  const onClose = jest.fn();
  const component = TestUtils.renderIntoDocument(
    <Container onClose={onClose} show />
  );
  const overlay = TestUtils.findRenderedDOMComponentWithClass(
    component,
    "cdk-bottom-sheet"
  );
  TestUtils.Simulate.click(overlay);
  expect(onClose).toHaveBeenCalled();
});

it("Renders with list & title", () => {
  expect(
    renderer.create(
      <BottomSheet open onClose={() => ({})}>
        <BottomSheetTitle>List title</BottomSheetTitle>
        <NavList>
          <NavListItem>Hungerford</NavListItem>
          <NavListItem>Portland</NavListItem>
          <NavListItem>Hoffman Estates</NavListItem>
        </NavList>
      </BottomSheet>
    )
  ).toMatchSnapshot();
});

it("Renders with FAB button", () => {
  expect(
    renderer.create(
      <BottomSheet open onClose={() => ({})}>
        <BottomSheetTitle>List title</BottomSheetTitle>
        <FAB>favorite</FAB>
      </BottomSheet>
    )
  ).toMatchSnapshot();
});
