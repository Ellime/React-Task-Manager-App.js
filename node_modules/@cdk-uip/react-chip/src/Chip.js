import React from "react";
import classnames from "classnames";
import { Icon } from "@cdk-uip/react-icon";
import { element, func } from "prop-types";

/**
 * Custom CDK chip implementation.
 *
 * > Note that an offical Material Design chip is now available. See
 * the `<ChipSet>` component for more details.
 *
 * * To make the chip clickable specify the `onClick` prop.
 * * To add a delete button specify the `onClickDelete` prop.
 */
const Chip = ({
  className,
  onClick,
  onClickDelete,
  contact,
  children,
  ...other
}) => {
  const T = onClick ? "button" : "span";
  return (
    <T
      className={classnames(
        "cdk-chip",
        {
          "cdk-chip--deletable": onClickDelete,
          "cdk-chip--contact": contact
        },
        className
      )}
      onClick={onClick}
      type={onClick ? "button" : undefined}
      {...other}
    >
      {contact}
      <span className="cdk-chip__text">{children}</span>
      {onClickDelete && (
        <button className="cdk-chip__action" onClick={onClickDelete}>
          <Icon>cancel</Icon>
        </button>
      )}
    </T>
  );
};

Chip.propTypes = {
  /** Render as a button and call this function when the chip is clicked. */
  onClick: func,
  /** Display a delete icon and call this function when it is clicked */
  onClickDelete: func,
  /** The contact element to render. Use a `<ChipContactImage>` or `<ChipContactText>` component. */
  contact: element
};

export default Chip;
