import React from "react";
import { Chip, ChipContactImage, ChipContactText } from ".";
import { storiesOf } from "@storybook/react";
import { action } from "@storybook/addon-actions";
import { withKnobs, text, boolean, select } from "@storybook/addon-knobs";
import user from "./user.jpg";

storiesOf("chip", module)
  .addDecorator(withKnobs)
  .add("props", () => {
    const contact = select("Contact", ["None", "Text", "Image"], "None");
    return (
      <Chip
        onClickDelete={
          boolean("Deletable", false) ? action("onClickDelete") : undefined
        }
        onClick={boolean("Button", false) ? action("onClick") : undefined}
        contact={
          (contact === "Text" && (
            <ChipContactText
              style={{ backgroundColor: "teal", color: "white" }}
            >
              A
            </ChipContactText>
          )) ||
          (contact === "Image" && <ChipContactImage src={user} />) ||
          undefined
        }
      >
        {text("Text", "This is a chip")}
      </Chip>
    );
  })
  .add("array", () => {
    class Wrapper extends React.Component {
      state = { chips: ["Ford", "Audi", "VW", "Hyundai", "Mercedes-Benz"] };
      render() {
        return (
          <div style={{ display: "flex", flexWrap: "wrap" }}>
            {this.state.chips.map((label, index) => (
              <Chip
                key={index}
                style={{ margin: 4 }}
                onClickDelete={e => {
                  e.preventDefault();
                  // Remove this item from the array
                  this.setState(prevState => ({
                    chips: prevState.chips.filter((_, i) => i !== index)
                  }));
                }}
              >
                {label}
              </Chip>
            ))}
          </div>
        );
      }
    }
    return <Wrapper />;
  });
