// "piggyback" on layout grid variables & mixins for responsive gutters
@import "@material/layout-grid/variables";
@import "@material/layout-grid/mixins";

$cdk-fluid-default-gutter: (
  desktop: 16px,
  tablet: 8px,
  phone: 8px
) !default;

:root {
  @each $size in map-keys($mdc-layout-grid-columns) {
    --cdk-fluid-gutter-#{$size}: #{map-get($cdk-fluid-default-gutter, $size)};
  }
}

.cdk-fluid {
  display: flex;
  flex: 1 1 auto;

  // offset the item padding around the container
  @each $size in map-keys($mdc-layout-grid-columns) {
    @include mdc-layout-grid-media-query_($size) {
      $gutter: map-get($cdk-fluid-default-gutter, $size);

      margin: 0 -$gutter / 2;
      margin: 0 calc(var(--cdk-fluid-gutter-#{$size}, #{$gutter}) / -2);
    }
  }

  flex-wrap: nowrap;

  &--wrap {
    &-nowrap {
      .cdk-fluid-item {
        flex-shrink: 0;
      }
    }

    &-items {
      flex-wrap: wrap;
    }
  }

  justify-content: space-between;

  &--halign {
    &-stretch {
      justify-content: space-between;
    }

    &-left {
      justify-content: flex-start;
    }

    &-center {
      justify-content: center;
    }

    &-right {
      justify-content: flex-end;
    }
  }

  align-items: stretch;

  &--valign {
    &-stretch {
      align-items: stretch;
    }

    &-top {
      align-items: flex-start;
    }

    &-middle {
      align-items: center;
    }

    &-bottom {
      align-items: flex-end;
    }
  }
}

.cdk-fluid__item {
  flex: 0 0 auto;
  min-width: 0;

  @each $size in map-keys($mdc-layout-grid-columns) {
    @include mdc-layout-grid-media-query_($size) {
      $gutter: map-get($cdk-fluid-default-gutter, $size);

      padding: 0 $gutter / 2;
      padding: 0 calc(var(--cdk-fluid-gutter-#{$size}, #{$gutter}) / 2);
    }
  }

  flex-shrink: 1;

  &--fill {
    flex-grow: 1;
    flex-shrink: 1;
  }

  &--valign {
    &-stretch {
      align-self: stretch;
    }

    &-top {
      align-self: flex-start;
    }

    &-middle {
      align-self: center;
    }

    &-bottom {
      align-self: flex-end;
    }
  }
}
