import React, { Children, cloneElement } from "react";
import classnames from "classnames";
import { bool, string } from "prop-types";

/**
 * Used to add labels to input controls.
 * You need to supply two child elements: an input and a label.
 * The ID will be injected into the child elements.
 */
const FormField = ({ id, className, alignEnd, children, ...other }) => (
  <div
    className={classnames(
      "mdc-form-field",
      {
        "mdc-form-field--align-end": alignEnd
      },
      className
    )}
    {...other}
  >
    {Children.map(children, child => {
      if (child === null) {
        return null;
      }
      if (child.type === "label") {
        // Inject "for" into the label element
        return cloneElement(child, { htmlFor: id });
      }
      // Inject the id
      // Assume this is the input element
      return cloneElement(child, { id });
    })}
  </div>
);

FormField.propTypes = {
  /** The id */
  id: string.isRequired,
  /** Left-aligned label */
  alignEnd: bool
};

export default FormField;
