import React from "react";
import { Login, LoginImage, LoginForgotPassword, LoginFooter } from ".";
import logo from "./CDK_Logo_R_RGB_300dpi.png";
import background from "./16-9.jpg";
import { Card, CardText } from "@cdk-uip/react-card";
import { TextField } from "@cdk-uip/react-text-field";
import { Checkbox } from "@cdk-uip/react-checkbox";
import { FormField } from "@cdk-uip/react-form-field";
import { Button } from "@cdk-uip/react-button";
import { storiesOf } from "@storybook/react";
import { action } from "@storybook/addon-actions";

storiesOf("login", module).add("controlled", () => {
  class ControlledLogin extends React.Component {
    state = { email: "", remember: false, password: "" };

    componentDidMount() {
      document.body.style = "margin: 0";
    }

    componentWillUnmount() {
      document.body.style = "margin: 8px";
    }

    render() {
      return (
        <Login
          style={{
            backgroundImage: `url(${background})`,
            backgroundRepeat: "no-repeat",
            backgroundSize: "100% 40%"
          }}
        >
          <Card>
            <CardText>
              <form
                onSubmit={e => {
                  e.preventDefault();
                  action("submit")(e);
                }}
              >
                <LoginImage src={logo} />
                <TextField
                  type="email"
                  label="Email or username"
                  required
                  value={this.state.email}
                  onChange={e => this.setState({ email: e.target.value })}
                  boxFocus={false}
                />
                <FormField id="remember">
                  <Checkbox
                    checked={this.state.remember}
                    onChange={e =>
                      this.setState({ remember: e.target.checked })
                    }
                  />
                  <label>Remember this</label>
                </FormField>
                <TextField
                  type="password"
                  label="Password"
                  required
                  value={this.state.password}
                  onChange={e => this.setState({ password: e.target.value })}
                  boxFocus={false}
                />
                <LoginForgotPassword onClick={action("forgot password")}>
                  Forgot your password?
                </LoginForgotPassword>
                <Button primary raised type="submit">
                  Sign In
                </Button>
              </form>
            </CardText>
          </Card>
          <LoginFooter>
            &copy; 2018 CDK Global, CDK Global is a trademark of CDK Global,
            LLC.
          </LoginFooter>
        </Login>
      );
    }
  }
  return <ControlledLogin />;
});
