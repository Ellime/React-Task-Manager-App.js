import React, { Component, Fragment } from "react";
import { storiesOf } from "@storybook/react";
import { withKnobs, text } from "@storybook/addon-knobs";
import { MonthPicker } from ".";
import moment from "moment";

storiesOf("month-picker", module)
  .addDecorator(withKnobs)
  .add("english", () => {
    moment.locale("en");

    class ControlledMonthPicker extends Component {
      state = { open: false, month: undefined, year: undefined };

      render() {
        return (
          <Fragment>
            <button
              className="mdc-button"
              onClick={() => {
                this.setState({ open: true });
              }}
            >
              Open
            </button>
            <MonthPicker
              open={this.state.open}
              onCancel={() => {
                this.setState({ open: false });
              }}
              title={text("title", "View Previous Statements")}
              month={this.state.month}
              monthLabel={text("monthLabel", "Month")}
              year={this.state.year}
              years={[2018, 2019, 2020]}
              yearLabel={text("yearLabel", "Year")}
              cancelLabel={text("cancelLabel", "Cancel")}
              okLabel={text("okLabel", "View")}
              onOK={(month, year) => {
                this.setState({ open: false, month, year });
              }}
            />
            <p>Month: {this.state.month}</p>
            <p>Year: {this.state.year}</p>
          </Fragment>
        );
      }
    }

    return <ControlledMonthPicker />;
  })
  .add("french", () => {
    moment.locale("fr");

    class ControlledMonthPicker extends Component {
      state = { open: false, month: undefined, year: undefined };

      render() {
        return (
          <Fragment>
            <button
              className="mdc-button"
              onClick={() => {
                this.setState({ open: true });
              }}
            >
              Open
            </button>
            <MonthPicker
              open={this.state.open}
              onCancel={() => {
                this.setState({ open: false });
              }}
              title={text("title", "Afficher les déclarations précédentes")}
              month={this.state.month}
              monthLabel="Mois"
              year={this.state.year}
              years={[2018, 2019, 2020]}
              yearLabel="An"
              cancelLabel="Annuler"
              okLabel="Vue"
              onOK={(month, year) => {
                this.setState({ open: false, month, year });
              }}
              {...this.props}
            />
            <p>Mois: {this.state.month}</p>
            <p>An: {this.state.year}</p>
          </Fragment>
        );
      }
    }

    return <ControlledMonthPicker />;
  });
