import React from "react";
import TestUtils from "react-dom/test-utils";
import renderer from "react-test-renderer";
import PersistentSearchResults from "./PersistentSearchResults";

it("renders", () => {
  expect(
    renderer.create(
      <PersistentSearchResults
        results={["Portland", "Hungerford", "Hyderabad"]}
      />
    )
  ).toMatchSnapshot();
});

it("handles onClick", () => {
  class Wrapper extends React.Component {
    render() {
      return (
        <PersistentSearchResults
          results={["Portland", "Hungerford", "Hyderabad"]}
          onClick={this.props.onClick}
        />
      );
    }
  }
  const handleClick = jest.fn();
  const component = TestUtils.renderIntoDocument(
    <Wrapper onClick={handleClick} />
  );
  const items = TestUtils.scryRenderedDOMComponentsWithTag(component, "li");
  TestUtils.Simulate.mouseDown(items[0]);
  expect(handleClick).toHaveBeenCalledWith("Portland", 0);
});
