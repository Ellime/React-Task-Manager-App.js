import React, { Component, Fragment } from "react";
import { SearchBox } from ".";
import { storiesOf } from "@storybook/react";
import { action } from "@storybook/addon-actions";

const properties = {
  label: "Search for something",
  onFetch: action("onFetch"),
  onClear: action("onClear")
};

storiesOf("search-box", module)
  .add("examples", () => (
    <div>
      <h1>On White:</h1>
      <SearchBox {...properties} className={"secondary"} />

      <h1>On Dark:</h1>
      <div style={{ backgroundColor: "#095098", padding: "20px" }}>
        <SearchBox {...properties} className={"dark"} />
      </div>

      <h1>On Dark, Active (white):</h1>
      <div style={{ backgroundColor: "#095098", padding: "20px" }}>
        <SearchBox {...properties} className={"primary"} />
      </div>
    </div>
  ))
  .add("controlled", () => {
    class ControlledSearchBox extends Component {
      state = { value: "", fetching: "" };

      render() {
        return (
          <Fragment>
            <SearchBox
              value={this.state.value}
              onChange={e => {
                this.setState({ value: e.target.value });
              }}
              onFetch={value => {
                this.setState({ fetching: value });
              }}
              onClear={() => {
                this.setState({ value: "" });
              }}
            />
            <p>Value: {this.state.value}</p>
            <p>Fetching: {this.state.fetching}</p>
            <button
              className="mdc-button"
              onClick={() => {
                this.setState({ value: "test" });
              }}
            >
              Set value
            </button>
          </Fragment>
        );
      }
    }
    return <ControlledSearchBox />;
  });
