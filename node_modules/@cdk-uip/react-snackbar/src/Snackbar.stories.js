import React, { Component, Fragment } from "react";
import { Snackbar, TemporarySnackbar } from ".";
import { Button } from "@cdk-uip/react-button";
import { storiesOf } from "@storybook/react";
import { action } from "@storybook/addon-actions";
import { withKnobs, text, boolean } from "@storybook/addon-knobs";

storiesOf("snackbar", module)
  .addDecorator(withKnobs)
  .add("props", () => (
    <Snackbar
      show={boolean("show", true)}
      message={text("message", "Message")}
      multiline={boolean("multiline", false)}
      alignStart={boolean("alignStart", false)}
      actionText={text("actionText", "Action")}
      onAction={action("onAction")}
      actionOnBottom={boolean("actionOnBottom", false)}
    />
  ))
  .add("temporary", () => {
    class Wrapper extends Component {
      state = { show: this.props.show };
      render() {
        return (
          <Fragment>
            <Button onClick={() => this.setState({ show: true })}>Show</Button>
            <TemporarySnackbar
              show={this.state.show}
              message="Message"
              onClose={() => {
                this.setState({ show: false });
                action()("onClose");
              }}
              actionText="Action"
              onAction={() => {
                this.setState({ show: false });
                action()("onAction");
              }}
            />
          </Fragment>
        );
      }
    }
    return <Wrapper show={boolean("initial state", false)} />;
  });
