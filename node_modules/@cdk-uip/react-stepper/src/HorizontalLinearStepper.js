import React from "react";
import {
  Stepper,
  Step,
  StepIcon,
  StepIconCompleted,
  StepLabel,
  StepDivider
} from ".";
import { arrayOf, bool, node, number } from "prop-types";

/**
 * A horizontal linear stepper.
 *
 * Linear steppers require users to complete one step in order to move on to the next.
 * This component allows you to supply an array of step labels, the currently active
 * step and a finished flag.
 *
 * Note that you need to supply your own suitable back/next/finish buttons.
 */
const HorizontalLinearStepper = ({ steps, activeStep, finished, ...other }) => (
  <Stepper {...other}>
    {steps.map((step, index) => [
      <Step key={index} inactive={index > activeStep}>
        {finished || activeStep > index ? (
          <StepIconCompleted />
        ) : (
          <StepIcon>{index + 1}</StepIcon>
        )}
        <StepLabel>{step}</StepLabel>
      </Step>,
      index < steps.length - 1 ? <StepDivider key={`divider-${index}`} /> : null
    ])}
  </Stepper>
);

HorizontalLinearStepper.propTypes = {
  /**
   * An array of steps. You can use string or React components
   * (such as the `react-intl` `FormattedMessage` component.)
   */
  steps: arrayOf(node).isRequired,
  /**
   * The index of the currently active step.
   */
  activeStep: number.isRequired,
  /**
   * Enable this prop to show all steps as completeed.
   */
  finished: bool
};

export default HorizontalLinearStepper;
