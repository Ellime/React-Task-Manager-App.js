'use strict';

var paths = require('../config/paths');
var npmbin = require('./utils/npmbin');
var minimist = require('minimist');

var cmd = '';
var args = [];

var argv = minimist(process.argv.slice(2));
if (argv.build) {
  // Build
  cmd = 'build-storybook';
  args = ['-s', paths.appPublic, '-c', paths.appStorybook];
} else {
  // Start
  cmd = 'start-storybook';
  args = ['-p', '9009', '-c', paths.appStorybook];
}

// Launch
npmbin(cmd, args, function(code) {
  if (code !== 0) {
    console.error('`' + cmd + ' ' + args.join(' ') + '` failed');
    process.exit(1);
  }
});
